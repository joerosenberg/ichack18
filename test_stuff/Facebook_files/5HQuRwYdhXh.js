if (self.CavalryLogger) { CavalryLogger.start_js(["ttStz"]); }

__d("DebugOverlayBitrate",["BinarySearch"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={computeBitrate:function i(j,k,l){__p&&__p();var m=[],n=0,o=k,p=j;m[0]=m[1]="N/A";if(!o)return{bitrate:m,currentPlayingSegment:n};for(var q=0;q<=1;q++){if(!o[q])continue;if(l>o[q].length)l=0;n=this._getCurrentSegment(q,p,o,l);var r=this._getSegmentSize(q,n,o),s=this._getSegmentLength(q,n,o);m[q]=r&&s?this._getBitrateString(s?r*8/s:0):"N/A"}return{bitrate:m,currentPlayingSegment:n}},_getBitrateString:function i(j){var k=1024;return(j/k).toFixed(1)+"Kbps"},_isPlayheadInsideSegment:function i(j,k,l){return j>=k&&j<=l},_getCurrentSegment:function i(j,k,l,m){__p&&__p();var n=m,o=l[j][n].startTime,p=l[j][n].endTime;if(!this._isPlayheadInsideSegment(k,o,p))if(n<l[j].length-1){o=l[j][n+1].startTime;p=l[j][n+1].endTime;if(this._isPlayheadInsideSegment(k,o,p))++n;else n=-1}else n=-1;if(n===-1){var q=c("BinarySearch").findBoundInArray(l[j].map(function(r){return r.startTime}),k,function(r,s){return r-s},c("BinarySearch").LEAST_STRICT_UPPER_BOUND);n=--q}return n},_getSegmentSize:function i(j,k,l){var m=l[j][k].url,n=m.startByte,o=m.endByte;return n===null||o===null||!o?0:o-n},_getSegmentLength:function i(j,k,l){var m=l[j][k],n=m.startTime,o=m.endTime;return n===null||o===null||!o?0:o-n}};f.exports=h}),null);
__d("VideoDebugDashManifestView.react",["cx","Promise","regeneratorRuntime","React","TooltipLink.react","UserAgent","URI","BinarySearch","VideoDebugOverlay","XHRRequest"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k={streamInterruptAt:"rgba(227,26,28,0.7)",commercialBreakAt:"rgba(127,188,65,0.7)",endedAt:"rgba(0,0,0,0.7)",timelineGapAt:"rgba(255,50,50,0.7)",timelineOverlapAt:"rgba(255,255,255,0.7)"},l=10,m=10,n=2/15,o=1+2*n,p=.25;i=babelHelpers.inherits(q,c("React").Component);j=i&&i.prototype;function q(r){__p&&__p();j.constructor.call(this,r);this.eventInView=function(event){return event.time<this.tMax&&event.time>=this.tMin}.bind(this);this.rangeInView=function(s){return s.startTime<this.tMax&&s.endTime>=this.tMin-p}.bind(this);this.renderTimeline=function(s,t){var u=["v","a"][t],v=s.map(this.renderSegment.bind(this,u)),w=o*t;return c("React").createElement("g",{key:"track-"+t,transform:"translate(0,"+w+")"},v)}.bind(this);this.renderBufferHealth=function(s,t){var u=t*o-n;return c("React").createElement("g",{key:"buffer"+t,transform:"translate(0,"+u+")"},s.filter(this.rangeInView).map(this.renderBufferRange))}.bind(this);this.renderMomentEvent=function(s,t){var u=s.type,v=s.time,w={key:t+"-"+u+"-"+v,stroke:k[u]};return c("React").createElement("line",babelHelpers["extends"]({x1:v,x2:v,y1:this.yMin,y2:this.yMax},w))}.bind(this);this.getVisibleSegments=function(s){return s.filter(this.rangeInView)}.bind(this);this.$VideoDebugDashManifestView1=0}q.prototype.$VideoDebugDashManifestView2=function(r){var s=new(c("URI"))(r.url),t=this.props.segmentInitSourceMap.get(s.getPath());if(!t)return"";var u=t.getFailoverUri(),v=this.$VideoDebugDashManifestView3(u);return v};q.prototype.$VideoDebugDashManifestView3=function(r){var s=new(c("URI"))(r),t=r.getStartByte(),u=r.getEndByte();if(t||u){s.addQueryData("bytestart",t);s.addQueryData("byteend",u)}return s.toString()};q.prototype.$VideoDebugDashManifestView4=function(r){return new(c("Promise"))(function(s,t){new(c("XHRRequest"))(r).setMethod("GET").setResponseType("blob").setResponseHandler(function(u,v,w){if(w)s(u)}).setErrorHandler(t).send()})};q.prototype.$VideoDebugDashManifestView5=function(r){var s=new(c("URI"))(r.url).getPath(),t=s.substring(s.lastIndexOf("/")+1);return t};q.prototype.$VideoDebugDashManifestView6=function(r){var s={a:"audio/mp4",v:"video/mp4"};return s[r[0]]};q.prototype.$VideoDebugDashManifestView7=function r(s,t,event){__p&&__p();var u,v,w,x,y,z,A,B,C;return c("regeneratorRuntime").async(function D(E){__p&&__p();while(1)switch(E.prev=E.next){case 0:u=c("UserAgent").isPlatform("Mac OS X")?event.metaKey:event.ctrlKey;E.next=3;return c("regeneratorRuntime").awrap(this.$VideoDebugDashManifestView8(s,t,u));case 3:v=E.sent;w=document.createElement("a");x=window.URL.createObjectURL(v);w.href=x;y=this.$VideoDebugDashManifestView5(s);z=y.lastIndexOf(".");A=y.substring(0,z);B=y.substring(z);w.download=A+"-"+t+B;C=this.$VideoDebugDashManifestView6(t);w.type=C;w.click();window.URL.revokeObjectURL(x);case 16:case"end":return E.stop()}},null,this)};q.prototype.$VideoDebugDashManifestView8=function r(s,t,u){__p&&__p();var v;return c("regeneratorRuntime").async(function w(x){while(1)switch(x.prev=x.next){case 0:v=[this.$VideoDebugDashManifestView3(s.url)];if(u)v.unshift(this.$VideoDebugDashManifestView2(s));return x.abrupt("return",c("Promise").all(v.map(function(y){return this.$VideoDebugDashManifestView4(y)}.bind(this))).then(function(y){return new Blob(y)}));case 3:case"end":return x.stop()}},null,this)};q.prototype.renderSegment=function(r,s,t){var u=s.startTime,v=s.debugInfo,w=v&&v.delta>0?v.endTime:s.endTime,x=w-u,y=this.props.getSegmentClass(this.props.segmentStates,s,r),z=""+r+t;return c("React").createElement(c("TooltipLink.react"),{key:z,tooltip:"Segment "+t+" - "+r,onClick:this.$VideoDebugDashManifestView7.bind(this,s,z)},c("React").createElement("rect",{className:y,x:u,width:x,height:"1"}))};q.prototype.renderBufferRange=function(r,s){var t=r.gap,u=r.startTime,v=r.endTime,w=t?"_4yqh _4sco":"_4yqi _4scq";return c("React").createElement("line",{key:"buffer-"+s,className:w,x1:u,x2:v})};q.prototype.renderDurationEvent=function(r,s){var t=r.type,u=r.track,v=r.startTime,w=r.endTime,x=o*u,y=x+1,z=v-p,A=v+p,B=w+p,C=w-p,D={d:"M"+z+" "+x+"L"+A+" "+y+"H"+B+"L"+C+" "+x,key:s+"-"+t+"-"+v+"-"+w,fill:k[t],stroke:k[t]};return c("React").createElement("path",D)};q.prototype.renderSegmentStats=function(r,s,t){if(!s)return null;if(!r){r=[];r[0]=r[1]="N/A"}return c("React").createElement(c("TooltipLink.react"),{key:"length-"+t,display:"inline",href:"#",className:"_2io3 _4scr",tooltip:"Current bitrate / Length of the largest buffered segment shown in this track"},r[t]+" / "+s.toFixed(2)+"s")};q.prototype.getLongestSegmentLength=function(r){return r.reduce(function(s,t){var u=t.startTime,v=t.endTime;return Math.max(s,v-u)},0)};q.prototype.computeViewBox=function(r,s){var t=this.props.segmentArrays.length;this.tMin=r-l;this.tMax=r+m;this.yMin=-2*n;this.yMax=t+2*n*s;return this.tMin+" "+this.yMin+" "+(l+m)+" "+this.yMax};q.prototype.render=function(){__p&&__p();var r=this.props,s=r.segmentArrays,t=r.playbackPosition;if(!s)return null;var u=this.props.getSourceBufferHealth(),v=this.computeViewBox(t,u.length),w=s.map(this.getVisibleSegments),x=w.map(this.getLongestSegmentLength),y=c("React").createElement("line",{x1:t,x2:t,y1:this.yMin,y2:this.yMax,stroke:"#000"}),z=this.props.timelineEvents.filter(this.eventInView),A=this.props.timelineRanges.filter(this.rangeInView);for(var B=0,C;C=w[B];B++)for(var D=C,E=Array.isArray(D),F=0,D=E?D:D[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var G;if(E){if(F>=D.length)break;G=D[F++]}else{F=D.next();if(F.done)break;G=F.value}var H=G,I=H.debugInfo;if(I){var J=I.delta,K=void 0,L=void 0,M=void 0;if(J>0){K="timelineGapAt";L=I.endTime;M=I.endTime+J}else{K="timelineOverlapAt";L=I.endTime+J;M=I.endTime}A.push({type:K,track:B,startTime:L,endTime:M})}}return this.props.isVisible?c("React").createElement("div",{className:"_2iob _4scs"},c("React").createElement(c("TooltipLink.react"),{display:"inline",href:"#",className:"_2iof _4scu",tooltip:"The vertical line marks the current playhead position. To the left of it, a "+l+"s window of past segments. Afterwards, the next upcoming "+m+"s of known segments."},"Video:",c("React").createElement("br",null),"Audio:"),c("React").createElement("div",{className:"_2iog _4scv"},x.map(function(N,O){return this.renderSegmentStats(this.props.bitrate,N,O)}.bind(this))),c("React").createElement("svg",{className:"_2ioh _4scw",viewBox:v,strokeWidth:n},w.map(this.renderTimeline),z.map(this.renderMomentEvent),A.map(this.renderDurationEvent),y,u.map(this.renderBufferHealth))):""};f.exports=q}),null);
__d("VDOPropertyUpdater",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();function h(i,j,k){"use strict";this.parent=j;this.property=i;this.initValue=k}h.prototype.safeValue=function(i){"use strict";return i===undefined?this.initValue:i};h.prototype.get=function(i){"use strict";return this.parent.getProp(i||this.property)};h.prototype.replace=function(i){"use strict";this.parent.replace(this.property,this.safeValue(i))};h.prototype.update=function(i,j){"use strict";this.parent.update(this.property,i,this.safeValue(j))};return h}()}),null);
__d("VDOIdentityHistory",["VDOPropertyUpdater"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VDOPropertyUpdater"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this,k,l);this.recordEvent=function(n,o){this.history[n]=this.safeValue(o)}.bind(this);this.recordProperty=this.recordEvent;this.history=[];this.initValue=m}j.prototype.previous=function(k,l){"use strict";this.replace(this.history[l])};j.prototype.next=function(k){"use strict";this.replace(this.history[k])};j.prototype.last=function(){"use strict";return this.safeValue(this.history[this.history.length-1])};return j}()}),null);
__d("VDOSegmentArraysHistory",["VDOPropertyUpdater"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VDOPropertyUpdater"));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this,k,l);this.indexDiffs=[]}j.prototype.recordEvent=function(k,l){"use strict";this.indexDiffs[k]=this.computeSegmentDiffToLog(l)};j.prototype.computeSegmentDiffToLog=function(k){"use strict";__p&&__p();var l=k;if(this.segmentIndexEndTimes)l=k.map(function(m,n){__p&&__p();var o=this.segmentIndexEndTimes[n];if(o==null)return m;var p=m.length;while(--p>=0)if(m[p].endTime<=o){p++;break}return m.slice(p)}.bind(this));this.segmentIndexEndTimes=this.extractEndTimes(k);return l};j.prototype.extractEndTimes=function(k){"use strict";var l=k.map(function(m){return m[m.length-1]});return l.filter(function(m){return m}).map(function(m){var n=m.endTime;return n})};j.prototype.previous=function(k,l){"use strict";__p&&__p();var m=this.indexDiffs[k];if(m){var n=this.get();for(var o=0;o<m.length;o++){var p=m[o].length;if(!p)continue;var q=n[o];m[o]=q.splice(q.length-p,p)}this.updateLivehead(n)}};j.prototype.next=function(k){"use strict";__p&&__p();var l=this.indexDiffs[k];if(l){var m=this.get();for(var n=0;n<l.length;n++){var o=m[n];o.push.apply(o,l[n])}this.updateLivehead(m)}};j.prototype.updateLivehead=function(k){"use strict";var l=this.extractEndTimes(k);if(l.length)this.parent.replace("liveheadPosition",Math.min.apply(Math,l))};return j}()}),null);
__d("VDOSegmentStatesHistory",["VDOPropertyUpdater"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VDOPropertyUpdater"));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this,k,l);this.segmentStates=[];this.segmentIDs=[]}j.prototype.recordEvent=function(k,l){"use strict";var m=l[0],n=l[1];this.segmentIDs[k]=m;this.segmentStates[k]=n};j.prototype.previous=function(k,l){"use strict";var m=this.segmentIDs[k];if(m){var n=l<0?-1:this.segmentIDs.lastIndexOf(m,l);this.update(m,n===-1?0:this.segmentStates[n])}};j.prototype.next=function(k){"use strict";var l=this.segmentIDs[k];if(l)this.update(l,this.segmentStates[k])};return j}()}),null);
__d("VDOSparseHistory",["VDOPropertyUpdater"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VDOPropertyUpdater"));i=h&&h.prototype;function j(k,l,m){"use strict";__p&&__p();i.constructor.call(this,k,l,m);this.recordEvent=function(n,o){if(this.isUpdate(o)){this.history[n]=o;this.mostRecent=o}}.bind(this);this.recordProperty=this.recordEvent;this.getAllUntil=function(n){var o=[];for(var p in this.history)if(Number(p)<=n)o.push(this.history[p]);return o}.bind(this);this.history={};this.initValue=m;this.mostRecent=undefined}j.prototype.isUpdate=function(k){"use strict";return this.mostRecent!==k};j.prototype.previous=function(k,l){"use strict";var m=-1;for(var n in this.history){if(Number(n)>l)break;m=Number(n)}if(m>=0)this.replace(this.history[m])};j.prototype.next=function(k){"use strict";if(k in this.history)this.replace(this.history[k])};return j}()}),null);
__d("VDOSourceBufferHealthHistory",["VDOSparseHistory"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=function j(k){if(k==null||typeof k!=="object")return k;if(Array.isArray(k))return k.map(j);var l={};for(var m in k)l[m]=j(k[m]);return l};f.exports=(i=h=function(){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("VDOSparseHistory"));l=k&&k.prototype;function m(n,o,p){"use strict";__p&&__p();l.constructor.call(this,n,o,p);this.recordEvent=function(q,r){var s,t=this,u=r(),v=this.isUpdate(u);window.updates=!!v+(window.updates||0);if(v)(function(){var w=j(u);t.history[q]=function(){return w};t.mostRecent=w})()}.bind(this);this.recordProperty=this.recordEvent}m.prototype.isUpdate=function(n){"use strict";__p&&__p();var o=this.mostRecent;if(n&&!o)return true;if(n.length!==this.mostRecent.length)return true;for(var p=0;p<n.length;p++){var q=n[p],r=o[p];if(!!q!==!!r)return true;var s=q.length;if(s!==r.length)return true;if(!s)continue;var t=q[s-1].endTime,u=r[s-1].endTime;if(t!==u)return true}return false};return m}(),h.deepClone=j,i)}),null);
__d("VideoDebugHistory",["VDOIdentityHistory","VDOSegmentStatesHistory","VDOSegmentArraysHistory","VDOSourceBufferHealthHistory","VDOSparseHistory"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(i){__p&&__p();if(typeof i==="function"){i=i();return function(){return i}}if(i==null||typeof i!=="object")return i;if(Array.isArray(i))return i.slice();return Object.assign({},i)};f.exports=function(){__p&&__p();function i(j){"use strict";this.frozenProps={};this.$VideoDebugHistory1=j;this.history=[];this.offset=Infinity;this.reconstructors={lastError:new(c("VDOIdentityHistory"))("lastError",this),stallTime:new(c("VDOSparseHistory"))("stallTime",this,0),playerState:new(c("VDOIdentityHistory"))("playerState",this,"loading"),playbackPosition:new(c("VDOIdentityHistory"))("playbackPosition",this,0),lastMpdFetchDuration:new(c("VDOSparseHistory"))("lastMpdFetchDuration",this),mpdUpdatePollCount:new(c("VDOSparseHistory"))("mpdUpdatePollCount",this),segmentStates:new(c("VDOSegmentStatesHistory"))("segmentStates",this),segmentArrays:new(c("VDOSegmentArraysHistory"))("segmentArrays",this),getSourceBufferHealth:new(c("VDOSourceBufferHealthHistory"))("getSourceBufferHealth",this),lastLogEvent:new(c("VDOSparseHistory"))("lastLogEvent",this)}}i.prototype.freezeProps=function(){"use strict";this.offset=this.history.length;var j=this.$VideoDebugHistory1();for(var k in j)j[k]=h(j[k]);this.frozenProps=j;return this.offset};i.prototype.record=function(event,j,k){"use strict";__p&&__p();var l=this.history.length;this.history.push(k);for(var m in this.reconstructors){var n=this.reconstructors[m],o=event[m],p=j[m];if(o!==undefined&&"recordEvent"in n)n.recordEvent(l,o,j);else if(p!==undefined&&"recordProperty"in n)n.recordProperty(l,p,j)}};i.prototype.getProps=function(){"use strict";return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length})};i.prototype.prev=function(){"use strict";__p&&__p();var j=Math.min(this.offset,this.history.length),k=j-1;if(k<0)return-Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.previous(j,k)}this.frozenProps.historyEventType=this.history[k];return this.offset=k};i.prototype.next=function(){"use strict";__p&&__p();var j=Math.min(this.offset,this.history.length),k=j+1;if(k>this.history.length)return Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.next(k)}this.frozenProps.historyEventType=this.history[k];return this.offset=k};i.prototype["goto"]=function(j){"use strict";var k=this.reconstructors.playbackPosition.last(),l=j>k,m=0;while(this.frozenProps.playbackPosition>j&&isFinite(m))m=this.prev();while(this.frozenProps.playbackPosition<j&&isFinite(m))m=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(j,k));return l?Infinity:m};i.prototype.getProp=function(j){"use strict";return this.frozenProps[j]};i.prototype.replace=function(j,k){"use strict";this.frozenProps[j]=k};i.prototype.update=function(j,k,l){"use strict";this.frozenProps[j][k]=l};return i}()}),null);
__d("exposeVideoDebug",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(i,j){__p&&__p();var k=i.getDebug,l=i.videoID,m=i.loggedError,n=i.lastError,o=k(),p=o.VideoPlayerController,q=o.VideoDebugParent,r=o.VideoDebugOverlay,s=o.VideoBufferGaps,t=o.ComboBufferGaps,u=o.AudioBufferGaps,v=q.getProps(),w=v.segmentArrays,x=w||[],y=x[0],z=x[1],A=p.getVideoAPI(),B=A.getDOMElement(),C=A.getDebug(),D=C.VideoPlayerHTML5Shaka,E={},F={};if(D){E=D.getDebug();var G=E,H=G.ShakaPlayer;if(H){F=H.getDebug();!F.identifiersIntact}}var I={vid:"videoID",vel:"VideoElement",mpd:"getManifest",abr:"AbrManager",bwe:"BandwidthEstimator",src:"VideoSource",vss:"VideoSourceStream",vsi:"VideoSegmentIndex",vbm:"VideoBufferManager",vsb:"VideoSourceBuffer",vbg:"VideoBufferGaps",cbg:"ComboBufferGaps",ass:"AudioSourceStream",asi:"AudioSegmentIndex",abm:"AudioBufferManager",asb:"AudioSourceBuffer",abg:"AudioBufferGaps",vtq:"VideoTaskQueue",vts:"VideoTaskScheduler",tss:"TextSourceStream",sha:"ShakaPlayer",h5s:"VideoPlayerHTML5Shaka",h5a:"VideoPlayerHTML5Api",vpc:"VideoPlayerController",vdp:"VideoDebugParent",vdo:"VideoDebugOverlay",lpe:"LoggedPlayerError",err:"PlayerError"},J=babelHelpers["extends"]({videoID:l,VideoElement:B,VideoBufferGaps:s,ComboBufferGaps:t,AudioBufferGaps:u,VideoSegmentIndex:y,AudioSegmentIndex:z},E,F,{VideoPlayerHTML5Shaka:D,VideoPlayerHTML5Api:A,VideoPlayerController:p,VideoDebugParent:q,VideoDebugOverlay:r,LoggedPlayerError:m,PlayerError:n,ns:function K(){__p&&__p();var L=arguments.length<=0||arguments[0]===undefined?window:arguments[0];console.group("videoDebug [videoID "+l+"]");for(var M in I){var N=I[M],O=J[N];if(O!==undefined){L[M]=O;window.console.log(M+" = "+N)}}console.groupEnd();return J}});window.videoDebug=J;if(j)J.ns()};f.exports=h}),null);
__d("VideoDebugOverlay",["cx","CSS","KeyboardShortcuts","Map","React","ReactDOM","SubscriptionsHandler","URI","VideoDebugHistory","VideoDebugOverlay.react","VideoPlayerReason","cancelAnimationFrame","clearTimeout","exposeVideoDebug","getActiveElement","requestAnimationFrame","setTimeout","DebugOverlayBitrate"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=0,j=1,k=2,l=["SegmentUnknown","SegmentFetching","SegmentFetched","SegmentFailed","SegmentAppended"],m=["_2io2","_19ur","_19us","_19ut","_37la"];function n(o,p,q){"use strict";__p&&__p();this.$VideoDebugOverlay11=function(r){if(r!=="DebugOverlay")this.setHidden(true)}.bind(this);this.inFocusAndAltKey=function(r,s){if(!r.altKey||s!=="onkeydown"||r.ctrlKey||r.metaKey)return false;var t=this.$VideoDebugOverlay3,u=c("getActiveElement")();return u.contains(t)||t.contains(u)}.bind(this);this.toggleMute=function(event){var r=this.$VideoDebugOverlay15;if(r.isMuted())r.unmute();else r.mute()}.bind(this);this.togglePause=function(event){var r=this.$VideoDebugOverlay15;if(r.isState("playing"))r.pause(c("VideoPlayerReason").USER);else r.play(c("VideoPlayerReason").USER)}.bind(this);this.onExpose=function(event){c("exposeVideoDebug")(this.getProps(),!!event.shiftKey)}.bind(this);this.onFreeze=function(event){if(this.$VideoDebugOverlay10)return this.resume();else return this.freeze()}.bind(this);this.onHistoryRew=function(event){if(event.shiftKey)return this["goto"](-Infinity);return this.prev()}.bind(this);this.onHistoryFwd=function(event){if(event.shiftKey){this["goto"](Infinity);return this.resume()}return this.next()}.bind(this);this.onLivePoll=function(){if(this.$VideoDebugOverlay20)c("clearTimeout")(this.$VideoDebugOverlay20);this.$VideoDebugOverlay20=c("setTimeout")(function(){this.$VideoDebugOverlay20=null}.bind(this),1e3)}.bind(this);this.onShakaDebug=function(r){__p&&__p();var s=r.type,event=r.event,t=null;switch(s){case"MPDFetchDuration":var u=event;this.$VideoDebugOverlay6.lastMpdFetchDuration=u;t={lastMpdFetchDuration:u};break;case"InitialSegmentIndexes":t=this.onSegmentIndexes(event,true);break;case"SegmentIndexesUpdated":t=this.onSegmentIndexes(event,false);break;case"SegmentInitSources":this.onSegmentInitSources(event);break;case"SegmentFetching":case"SegmentFetched":case"SegmentFailed":case"SegmentAppended":t=this.onSegmentEvent(s,event);break;case"streamInterruptAt":case"commercialBreakAt":case"endedAt":this.addTimelineMark(s,event);break;case"streamResumedAt":this.removeTimelineMark("streamInterruptAt",event);break;default:return}if(t)this.record(s,t)}.bind(this);this.onVpcLogEvent=function(event){this.$VideoDebugOverlay6.lastLogEvent=event;this.$VideoDebugOverlay6.getLogEventsUntil=this.$VideoDebugOverlay5.reconstructors.lastLogEvent.getAllUntil;this.record(event.event,{lastLogEvent:event})}.bind(this);this.getSourceBufferHealth=function(){this.$VideoDebugOverlay12[j]=this.$VideoDebugOverlay15.getVideoNode();return this.$VideoDebugOverlay12.map(this.$VideoDebugOverlay21)}.bind(this);this.$VideoDebugOverlay21=function(r,s){__p&&__p();var t=[];if(!r)return t;var u=void 0,v=void 0;try{u=r.buffered;v=u.length}catch(w){return t}for(var x=0;x<v;x++)t.push({gap:false,startTime:u.start(x),endTime:u.end(x)});for(var y=1;y<v;y++){var z={gap:true,startTime:t[y-1].endTime,endTime:t[y].startTime};t.push(z);this.$VideoDebugOverlay13[s][z.startTime]=z}return t}.bind(this);this.toggleHidden=function(){return this.setHidden(!this.getHidden())}.bind(this);this.getHidden=function(){return this.$VideoDebugOverlay22}.bind(this);this.setHidden=function(r){this.$VideoDebugOverlay22=r;if(this.$VideoDebugOverlay22)this.stopAnimating();else{if(this.$VideoDebugOverlay15)this.$VideoDebugOverlay15.showDebugOverlayView("DebugOverlay");this.startAnimating()}c("CSS").conditionClass(this.$VideoDebugOverlay3,"hidden_elem",this.$VideoDebugOverlay22)}.bind(this);this.getDebug=function(){return{VideoPlayerController:this.$VideoDebugOverlay15,VideoDebugOverlay:this.vdo,VideoDebugParent:this,VideoBufferGaps:this.$VideoDebugOverlay13[i],ComboBufferGaps:this.$VideoDebugOverlay13[j],AudioBufferGaps:this.$VideoDebugOverlay13[k]}}.bind(this);this.getProps=function(){var r=this.$VideoDebugOverlay15;if(!r)return null;var s=r.getVideoResolution(),t=s.height,u=s.width,v=r.getDebugInfo(),w=v.currentVideo,x=v.player,y=c("DebugOverlayBitrate").computeBitrate(r.getCurrentTimePosition(),this.$VideoDebugOverlay6.segmentArrays,this.$VideoDebugOverlay2),z=y.bitrate;return Object.assign({},this.$VideoDebugOverlay6,{videoID:r.getVideoID(),playbackPosition:r.getCurrentTimePosition(),playbackDuration:r.getPlaybackDuration(),isSpherical:r.isSpherical(),streamType:w.streamType,projection:w.projection,isLiveStream:w.isLiveStream,isHD:w.isHD,hasHD:w.hasHD,tagSD:w.tagSD,tagHD:w.tagHD,hasSubtitles:w.hasSubtitles,isRateLimited:w.isRateLimited,hasRateLimit:w.hasRateLimit,liveManifestUrl:w.liveManifestUrl,isAkamai:w.liveManifestUrl&&w.liveManifestUrl.includes("akamaihd"),streamId:w.streamId,audioStreamId:w.audioStreamId,videoHeight:t,videoWidth:u,hasSpatialAudio:r.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio"),dashAudioFormat:w.dashAudioFormat,initializationTime:x.initializationTime,initializationTimestamp:x.initializationTimestamp,playerVersion:x.version,stallCount:x.stallCount,stallTime:x.stallTime,interruptCount:x.interruptCount,interruptTime:x.interruptTime,loggedError:x.loggedError,lastError:x.lastError,droppedFrames:x.droppedFrames,totalFrames:x.totalFrames,viewabilityPercentage:x.viewabilityPercentage,getDebug:this.getDebug,playerState:this.$VideoDebugOverlay19(),isPolling:!!this.$VideoDebugOverlay20,getSegmentClass:n.getSegmentClass,bitrate:z})}.bind(this);this.$VideoDebugOverlay23=function(r){this.vdo=r}.bind(this);this.$VideoDebugOverlay3=o;this.$VideoDebugOverlay4=p;this.$VideoDebugOverlay5=new(c("VideoDebugHistory"))(this.getProps);this.$VideoDebugOverlay6=this.$VideoDebugOverlay7();this.$VideoDebugOverlay8();this.$VideoDebugOverlay9=null;this.$VideoDebugOverlay10=false;this.setHidden(q.hidden);this.$VideoDebugOverlay1=q.timeBetweenRender;this.$VideoDebugOverlay2=0}n.prototype.$VideoDebugOverlay8=function(){"use strict";this.$VideoDebugOverlay12=[null,null,null];this.$VideoDebugOverlay13=[{},{},{}]};n.prototype.$VideoDebugOverlay7=function(){"use strict";var o=this.$VideoDebugOverlay4,p=o.autoplayReason,q=o.autoplayReasonReadable;return{autoplayReason:p,autoplayReasonReadable:q,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},segmentInitSourceMap:null,timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function r(){return[]},yaw:0,pitch:0,lastRTT:null}};n.prototype.disable=function(){"use strict";this.setHidden(true);this.$VideoDebugOverlay14.release();this.$VideoDebugOverlay15.unregisterOption("DebugOverlay","hidden")};n.prototype.enable=function(o){__p&&__p();var p;"use strict";this.$VideoDebugOverlay15=o;this.$VideoDebugOverlay14=new(c("SubscriptionsHandler"))();(p=this.$VideoDebugOverlay14).addSubscriptions.apply(p,[o.addListener("showDebugOverlay",this.$VideoDebugOverlay11),o.addListener("VideoWithLiveBroadcast/poll",this.onLivePoll),o.addListener("debug/shakaEvent",this.onShakaDebug),o.addListener("debug/vpcLogEvent",this.onVpcLogEvent),o.addListener("streamInterrupted",function(){this.$VideoDebugOverlay16("interrupted")}.bind(this)),o.addListener("streamResumed",function(){this.$VideoDebugOverlay16(null)}.bind(this)),o.addListener("buffering",function(){this.$VideoDebugOverlay16("buffering")}.bind(this)),o.addListener("buffered",function(){this.$VideoDebugOverlay16(null)}.bind(this)),o.addListener("abortedLoading",function(){this.$VideoDebugOverlay16("aborted")}.bind(this)),o.addListener("restoringAfterAbort",function(){this.$VideoDebugOverlay16("restoring");this.$VideoDebugOverlay6=this.$VideoDebugOverlay7();this.$VideoDebugOverlay8()}.bind(this)),o.addListener("restoredAfterAbort",function(){this.$VideoDebugOverlay16(null)}.bind(this)),o.addListener("bufferingChanged",function(){var q=o.getDebugInfo(),r=q.player,event={stallTime:r.stallTime},s={playbackPosition:o.getCurrentTimePosition()};this.$VideoDebugOverlay5.record(event,s,"bufferingChanged")}.bind(this)),o.addListener("viewportChange",function(q,r){this.$VideoDebugOverlay6.yaw=q;this.$VideoDebugOverlay6.pitch=r}.bind(this))].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));o.registerOption("DebugOverlay","hidden",this.getHidden,this.setHidden);if(this.$VideoDebugOverlay17(o.getVideoID()))this.setHidden(false)};n.prototype.registerKeys=function(o){"use strict";var p=[],q={baseFilters:[this.inFocusAndAltKey],allowDefault:true};for(var r in o)p.push(c("KeyboardShortcuts").register(r,o[r],q));return p};n.prototype.$VideoDebugOverlay17=function(o){"use strict";var p=c("URI").getRequestURI().getQueryData(),q=p.vid;switch(q){case undefined:return false;case null:return true;default:return q.split(/\D+/g).indexOf(o)!==-1}};n.prototype.$VideoDebugOverlay16=function(o){"use strict";this.$VideoDebugOverlay18=o};n.prototype.$VideoDebugOverlay19=function(){"use strict";var o=this.$VideoDebugOverlay15.getState();if(this.$VideoDebugOverlay18)o+=" ("+this.$VideoDebugOverlay18+")";return o};n.prototype.addTimelineMark=function(o,p){"use strict";var event={type:o,time:p};this.removeTimelineMark(event);var q=this.$VideoDebugOverlay6.timelineEvents;q.push(event);return p};n.prototype.removeTimelineMark=function(o,p){"use strict";__p&&__p();var q=this.$VideoDebugOverlay6.timelineEvents;for(var r=0;r<q.length;r++){var event=q[r];if(event.type===o&&event.time===p){q.splice(r,1);return true}}return false};n.prototype.record=function(o,p,q){"use strict";var r=this.$VideoDebugOverlay15;q=q||{};p=p||{};this.$VideoDebugOverlay5.record(p,Object.assign(q,this.$VideoDebugOverlay6,{playerState:this.$VideoDebugOverlay19(),playbackPosition:r.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),o)};n.getSegmentId=function(o,p){"use strict";return p+o.startTime};n.getSegmentClass=function(o,p,q){"use strict";var r=n.getSegmentId(p,q);return m[o[r]||0]};n.prototype.onSegmentEvent=function(o,event){"use strict";__p&&__p();var p=event.type,q=event.segment,r=event.segment.url,s=event.sourceBuffer,t=n.getSegmentId(q,p),u=l.indexOf(o);this.$VideoDebugOverlay6.segmentStates[t]=u;if(o==="SegmentFetched"&&r.getResourceTimingEntry())this.$VideoDebugOverlay6.lastRTT=r.getResourceTimingEntry().timeToFirstByte;switch(p){case"v":this.$VideoDebugOverlay12[i]=s;break;case"a":this.$VideoDebugOverlay12[k]=s;break}return{segmentStates:[t,u]}};n.prototype.onSegmentIndexes=function(o,p){"use strict";__p&&__p();var q=p||o.some(function(v){return v.lastPollHadChanges()}),r=o.map(function(v){return v.getSegments()});if(q){var s=this.$VideoDebugOverlay6.lastMpdChangesTime;this.$VideoDebugOverlay6.prevMpdChangesTime=s;this.$VideoDebugOverlay6.lastMpdChangesTime=Date.now();this.$VideoDebugOverlay6.mpdUpdatePollCount=0}else this.$VideoDebugOverlay6.mpdUpdatePollCount+=1;this.$VideoDebugOverlay6.segmentArrays=r;var t=r.map(function(v){return v[v.length-1]}).filter(function(v){return v}).map(function(v){var w=v.endTime;return w});if(t.length)this.$VideoDebugOverlay6.liveheadPosition=Math.min.apply(Math,t);var u=this.$VideoDebugOverlay6.mpdUpdatePollCount;return{segmentArrays:r,mpdUpdatePollCount:u}};n.prototype.onSegmentInitSources=function(o){"use strict";this.$VideoDebugOverlay6.segmentInitSourceMap=new(c("Map"))(o.map(function(p){var q=p.getFailoverUri(),r=new(c("URI"))(q.toString());return[r.getPath(),p]}))};n.prototype.isHidden=function(){"use strict";return this.$VideoDebugOverlay22};n.prototype.startAnimating=function(){"use strict";if(this.$VideoDebugOverlay9)return;var o=function(){this.renderOverlay();if(this.$VideoDebugOverlay1)this.$VideoDebugOverlay9=c("setTimeout")(o,this.$VideoDebugOverlay1);else this.$VideoDebugOverlay9=c("requestAnimationFrame")(o)}.bind(this);o()};n.prototype.stopAnimating=function(){"use strict";var o=this.$VideoDebugOverlay9;if(this.$VideoDebugOverlay9){if(this.$VideoDebugOverlay1)c("clearTimeout")(this.$VideoDebugOverlay9);else c("cancelAnimationFrame")(this.$VideoDebugOverlay9);this.$VideoDebugOverlay9=null}return o};n.prototype.prev=function(){"use strict";this.freeze();this.$VideoDebugOverlay5.prev()};n.prototype.next=function(){"use strict";this.freeze();var o=this.$VideoDebugOverlay5.next();if(!isFinite(o))this.resume()};n.prototype["goto"]=function(o){"use strict";this.freeze();this.$VideoDebugOverlay5["goto"](o)};n.prototype.freeze=function(){"use strict";if(!this.$VideoDebugOverlay10){this.$VideoDebugOverlay5.freezeProps();this.$VideoDebugOverlay10=true}};n.prototype.resume=function(){"use strict";this.$VideoDebugOverlay10=false};n.prototype.getPropsToRender=function(){"use strict";return this.$VideoDebugOverlay10?this.$VideoDebugOverlay5.getProps():this.getProps()};n.prototype.renderOverlay=function(){"use strict";var o=!this.$VideoDebugOverlay22&&this.getPropsToRender();if(o)c("ReactDOM").render(c("React").createElement(c("VideoDebugOverlay.react"),babelHelpers["extends"]({ref:this.$VideoDebugOverlay23},o)),this.$VideoDebugOverlay3)};f.exports=n}),null);
__d("VideoDebugItem.react",["cx","React","TooltipLink.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=this.props.children,m=null;if(this.props.column==="right")m="_s5q";var n=this.props.label;if(this.props.tooltip)n=c("React").createElement(c("TooltipLink.react"),this.props,n);return c("React").createElement("div",{className:m},c("React").createElement("b",null,n),": ",l)};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("VideoDebugDashMpdLag.react",["React","VideoDebugItem.react","TooltipLink.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.componentWillReceiveProps=function(k){var l=k.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:l})};j.prototype.shouldComponentUpdate=function(k,l){return l.mpdPoll};j.prototype.$VideoDebugDashMpdLag1=function(k){return(k/1e3).toFixed(3)+"s"};j.prototype.render=function(){var k=this.props,l=k.lastMpdFetchDuration,m=k.lastMpdChangesTime;if(!l)return null;var n=this.$VideoDebugDashMpdLag1(Date.now()-m),o="We saw no new segments in this number of MPD polls.\n"+(l?"Last poll with news was "+n+" ago.":"It has been "+n+" without news, since we started polling."),p=null,q=this.props.prevMpdChangesTime;if(q){p=this.$VideoDebugDashMpdLag1(m-q);p=": "+p}return c("React").createElement("div",null,c("React").createElement(c("VideoDebugItem.react"),{label:"MPD load time",column:"right",tooltip:"Load time of the most recent dash manifest"},l.toFixed(3),"s"),c("React").createElement(c("VideoDebugItem.react"),{label:"MPD polls",href:this.props.liveManifestUrl||null,tooltip:"Number of recent dash manifest polls without news,\nand the time last poll for new segments took."},c("React").createElement(c("TooltipLink.react"),{tooltip:o},this.props.mpdUpdatePollCount),p))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoDebugDashRepresentation.react",["React","TooltipLink.react","VideoDebugItem.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.idToolLink=function(k){return"https://our.intern.facebook.com/intern/id2/"+k+"/"};j.prototype.render=function(){__p&&__p();var k=this.props,l=k.streamId,m=k.audioStreamId,n=k.audioFormat;if(!l)return null;var o=l,p=l.replace(/vd?$/,"");if(/^\d+$/.test(p))o=c("React").createElement(c("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing video representation id",href:this.idToolLink(p)},o);var q="";if(m){var r=m.replace(/ad?$/,"");if(/^\d+$/.test(r))q=c("React").createElement(c("VideoDebugItem.react"),{label:"Audio Representation"},c("React").createElement(c("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing audio representation id",href:this.idToolLink(r)},m)," (",n,")");else q=c("React").createElement(c("VideoDebugItem.react"),{label:"Audio Representation"},m)}return c("React").createElement("div",null,c("React").createElement(c("VideoDebugItem.react"),{label:"Video Representation"},o),q)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoDebugExposeVideoDebug.react",["cx","React","TooltipLink.react","exposeVideoDebug"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$VideoDebugExposeVideoDebug1=function(event){event.preventDefault();c("exposeVideoDebug")(this.props,!!event.shiftKey)}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("TooltipLink.react"),{display:"inline",className:"_5jy",style:{right:"15px"},onClick:this.$VideoDebugExposeVideoDebug1,tooltip:"Expose a videoDebug object for this video to js devtools.\n(Shift-click to break out independent globals immediately.)"},"js")};f.exports=k}),null);
__d("VideoDebugFlag.react",["cx","React","TooltipLink.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=this.props,m=l.tooltip,n=l.active,o=l.available,p="_45za",q=this.renderDot(n,o),r=this.props.label;if(m)r=c("React").createElement(c("TooltipLink.react"),{display:"inline",href:"#",tooltip:m},r);return c("React").createElement("li",{className:p},c("React").createElement("b",null,r),": ",q)};k.prototype.renderDot=function(l,m){"use strict";var n={color:l?"green":m?"red":"gray"};return c("React").createElement("span",{className:"_45zb",style:n},"\u25cf")};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("VideoDebugLogMessages.react",["cx","React","VideoDebugItem.react","VideoPlayerLoggerEvent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=" \ud83d\ude1e";i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderOption=function(r,s){var event=r.event;if(event===c("VideoPlayerLoggerEvent").PAUSED||event===c("VideoPlayerLoggerEvent").FINISHED_PLAYING)event=event.toUpperCase();var t=r.logData,u=t.time_ms,v=t.recent_stalls_count,w=this.props.initializationTimestamp,x=((u-w)/1e3).toFixed(3),y=v?k:null;return c("React").createElement("option",{key:s,value:s},x,"s: ",event,y)}.bind(this),this.$VideoDebugLogMessages2=function(event){var r=this.$VideoDebugLogMessages3(),s=r[Number(event.target.value)];console.group("log = %s event",s.event);console.groupEnd()}.bind(this),n}l.prototype.shouldComponentUpdate=function(m){return this.$VideoDebugLogMessages1!==m.lastLogEvent};l.prototype.$VideoDebugLogMessages3=function(){var m=this.props,n=m.getLogEventsUntil,o=m.atHistoryEntry,p=o==null?Infinity:o;return n(p)};l.prototype.render=function(){var m=this.$VideoDebugLogMessages3(),n=m.length-1;this.$VideoDebugLogMessages1=m[n];var o=void 0;if(m.length)o=c("React").createElement("select",{value:n,className:"_4a8p",onChange:this.$VideoDebugLogMessages2},m.map(this.renderOption));return c("React").createElement(c("VideoDebugItem.react"),{label:"Log"},o)};f.exports=l}),null);
__d("VideoDebugScubaEventsLink.react",["CurrentUser","React","URI","TooltipLink.react","VideoDebugItem.react","formatDate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.getScubaUrl=function(k,l,m){function n(p){var q=new Date(p);return c("formatDate")(q,"Y-m-d H:i:s",{skipPatternLocalization:true})}var o={cols:["time_ms","time_ms_begin","event_name","userid","video_id","time_ms_done","stall_time"],derivedCols:[],num_samples:"100",dimensions:["event_name"],startcol:"time_ms_begin",endcol:"time_ms_done",colorcol:"event_name",bordercol:"event_name",ordercol:"time_ms_begin",labelcol:"__number",unit:"Auto",aggregate:"",start:n(m-5e3),end:"now",modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+k+'"]']},video_id:{eq:['["'+l+'"]']}},c_constraints:{},b_constraints:{}};return new(c("URI"))("https://our.intern.facebook.com/intern/scuba/query/").setQueryData({dataset:"video_player_log",view:"TimelineBreakdown",drillstate:JSON.stringify(o)}).toString()};j.prototype.shouldComponentUpdate=function(k){var l=this.props.atHistoryEntry!==null;if(l)return k.atHistoryEntry!==this.props.atHistoryEntry||k.historyLength!==this.props.historyLength;return!!k.atHistoryEntry};j.prototype.render=function(){__p&&__p();var k=this.props.videoID,l=[];if(this.props.isLiveStream){var m=c("React").createElement(c("TooltipLink.react"),{display:"inline",href:new(c("URI"))("https://our.intern.facebook.com/intern/facecast/debug/").setQueryData({video_broadcast_id:k}).toString(),tooltip:"Debug in Facecast"},"FC");l.push(c("React").createElement("span",{key:"live"}," [",m,"]"))}if(this.props.isSpherical){var n=c("React").createElement(c("TooltipLink.react"),{display:"inline",target:"_blank",href:new(c("URI"))("https://our.intern.facebook.com/intern/360dive/").setQueryData({video_id:k}).toString(),tooltip:"Debug in 360dive"},"360dive");l.push(c("React").createElement("span",{key:"spherical"}," [",n,"]"))}var o=this.props.initializationTimestamp,p={href:this.getScubaUrl(c("CurrentUser").getID(),k,o),tooltip:"Show scuba video_player_log events timeline for this video",target:"_blank",label:"Video"},q=null,r=this.props,s=r.atHistoryEntry,t=r.historyLength;if(s!=null)q=c("React").createElement("span",null,c("React").createElement("b",null," frozen at")," ",s,"/",t);return c("React").createElement(c("VideoDebugItem.react"),p,k,l,q)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoDebugOverlay.react",["cx","React","TooltipLink.react","VideoDebugDashRepresentation.react","VideoDebugDashManifestView.react","VideoDebugDashMpdLag.react","VideoDebugExposeVideoDebug.react","VideoDebugFlag.react","VideoDebugItem.react","VideoDebugLogMessages.react","VideoDebugScubaEventsLink.react","CurrentUser"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$VideoDebugOverlay1=function(l){"use strict";return Number(l||0).toFixed(1)+"ms"};k.prototype.$VideoDebugOverlay2=function(l){"use strict";return Number(l||0).toFixed(3)+"s"};k.prototype.$VideoDebugOverlay3=function(l,m){"use strict";return Math.floor(l)+" / "+Math.floor(m)};k.prototype.render=function(){"use strict";__p&&__p();var l=null;if(this.props.streamType==="dash")l=c("React").createElement(c("VideoDebugDashRepresentation.react"),{streamId:this.props.streamId,audioStreamId:this.props.audioStreamId,audioFormat:this.props.dashAudioFormat});else{var m=this.props,n=m.tagSD,o=m.tagHD;if(o)l=n+" (SD) / "+o+" (HD)";else l=n+" (SD)";l=c("React").createElement(c("VideoDebugItem.react"),{label:"Encoding"},l)}var p=!!this.props.segmentArrays,q="The current time of the video.";if(p)q+=" (The black bar in the graph.)";var r=null,s=this.props,t=s.liveheadPosition,u=s.playbackPosition;if(t&&this.props.isLiveStream){var v=this.$VideoDebugOverlay2(t-u);r=c("React").createElement(c("VideoDebugItem.react"),{label:"Livehead \u0394",column:"right",tooltip:"How much ahead of the playhead the current livehead is. In the graph below, that amounts to the time between the playhead (the black bar) and the end of the final segment."},v)}else r=c("React").createElement(c("VideoDebugItem.react"),{label:"Duration",column:"right"},this.$VideoDebugOverlay2(this.props.playbackDuration));var w=null;if(this.props.isLiveStream&&this.props.streamType=="dash")w=c("React").createElement(c("VideoDebugDashMpdLag.react"),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime});var x=this.props.lastError;if(x){var y=x,z=y.error,A=y.message;x=c("React").createElement(c("VideoDebugItem.react"),{label:"Error"},z,": ",A)}var B=this.props,C=B.atHistoryEntry,D=B.historyEventType,E=C!=null?"isFrozen":null,F=null;if(D)F=c("React").createElement(c("VideoDebugItem.react"),{label:"History event"},D);else F=c("React").createElement(c("VideoDebugItem.react"),{label:"Autoplay reason"},c("React").createElement(c("TooltipLink.react"),{display:"inline",href:"#",tooltip:this.props.autoplayReasonReadable},this.props.autoplayReason));var G=null;if(this.props.viewabilityPercentage)G=c("React").createElement(c("VideoDebugItem.react"),{label:"Viewability Percentage"},this.props.viewabilityPercentage);var H=c("React").createElement(c("VideoDebugItem.react"),{label:"Projection"},this.props.projection);if(this.props.isSpherical)H=c("React").createElement("div",null,c("React").createElement(c("VideoDebugItem.react"),{label:"Yaw / Pitch",tooltip:"The yaw / pitch orientation of the video"},this.$VideoDebugOverlay3(this.props.yaw,this.props.pitch)),H);return c("React").createElement("div",{className:E},c("React").createElement(c("TooltipLink.react"),{target:"_blank",display:"inline",className:"_5jy",href:"https://our.intern.facebook.com/intern/dex/video-debug-overlay/",tooltip:"See the DEX about how to read this overlay"},"?"),c("React").createElement(c("VideoDebugExposeVideoDebug.react"),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),c("React").createElement(c("VideoDebugScubaEventsLink.react"),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream,isSpherical:this.props.isSpherical}),F,c("React").createElement(c("VideoDebugLogMessages.react"),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),x,c("React").createElement(c("VideoDebugItem.react"),{label:"State",column:"right"},this.props.playerState),c("React").createElement(c("VideoDebugItem.react"),{label:"Player"},this.props.playerVersion),c("React").createElement(c("VideoDebugItem.react"),{label:"Stalls",column:"right"},this.props.stallCount,": ",this.$VideoDebugOverlay2(this.props.stallTime/1e3)),c("React").createElement(c("VideoDebugItem.react"),{label:"Init time"},this.$VideoDebugOverlay2(this.props.initializationTime/1e3)),c("React").createElement(c("VideoDebugItem.react"),{label:"Interrupts",column:"right"},this.props.interruptCount,": ",this.$VideoDebugOverlay2(this.props.interruptTime/1e3)),c("React").createElement(c("VideoDebugItem.react"),{label:"Stream Type"},this.props.streamType),c("React").createElement(c("VideoDebugItem.react"),{label:"Frames/Dropped",column:"right"},this.props.totalFrames+"/"+this.props.droppedFrames),c("React").createElement(c("VideoDebugItem.react"),{label:"Round-trip time"},this.props.lastRTT?this.$VideoDebugOverlay1(this.props.lastRTT):"n/a"),c("React").createElement(c("VideoDebugItem.react"),{label:"Rep. Size",column:"right",tooltip:"Resolution of the representation, as reported by the browser"},this.props.videoWidth," x ",this.props.videoHeight),H,l,c("React").createElement("ul",null,c("React").createElement(c("VideoDebugFlag.react"),{label:"HD",active:this.props.isHD,available:this.props.hasHD,tooltip:"High Definition. Indicates if the video has an HD stream and if it is playing."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"Live",active:this.props.isLiveStream,tooltip:"Indicates if this is a Live stream."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"CVC Poller",active:this.props.isPolling,available:this.props.isLiveStream,tooltip:"Concurrent Viewer Count Poller. Indicates if a poll request was sent recently. This should blink at a ~3 sec inteval."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"RL",active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:"Rate Limit. Indicates if the server is rate limiting the video stream."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"ST",active:this.props.hasSubtitles,tooltip:"Subtitles. Indicates if the video has subtitles."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"SA",active:this.props.hasSpatialAudio,tooltip:"Spatial Audio. Indicates if the video has spatial audio."}),c("React").createElement(c("VideoDebugFlag.react"),{label:"Akamai",active:this.props.isAkamai,tooltip:"Akamai. Indicates if the video is being served from Akamai."})),r,G,c("React").createElement(c("VideoDebugItem.react"),{label:"Playhead",tooltip:q},this.$VideoDebugOverlay2(u)),c("React").createElement(c("VideoDebugDashManifestView.react"),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:u,segmentInitSourceMap:this.props.segmentInitSourceMap,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass,bitrate:this.props.bitrate,isVisible:c("CurrentUser").isEmployee()}),w)};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);